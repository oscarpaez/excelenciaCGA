<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<ui:composition template="/templates/modeloGeneral2.xhtml">

	<ui:define name="contenido">

		<f:metadata>

			<f:event listener="#{vista_helpdeskBean.listarVistaKpi()}"
				type="preRenderView" />
		</f:metadata>

		<h:form id="frmPlan">
			<p:poll interval="60" listener="#{vista_helpdeskBean.listarVistaKpi()}" 
				update=":frmPlan:tblPlan  :frmPlan:tblPlanS :frmPlan:kpiF  :frmPlan:kpiS" />
			<p:panel>

				<p:dataTable styleClass="tblPla" id="tblPlan"
					emptyMessage="No se encontraron registros" scrollRows="40"
					scrollable="true" liveScroll="true" scrollHeight="100"
					value="#{vista_helpdeskBean.listaVista}" var="kpi"
					filteredValue="#{vista_helpdeskBean.listaVistaFiltro}"
					scrollWidth="97%">

					<p:columnGroup type="header">
						<p:row>
							<p:column rowspan="1" colspan="2"
								headerText="Resumen Infraestructura" width="150" />
							<p:column rowspan="1" headerText="Ene" width="60" />
							<p:column rowspan="1" headerText="Feb" width="60" />
							<p:column rowspan="1" headerText="Mar" width="60" />
							<p:column rowspan="1" headerText="Abr" width="60" />
							<p:column rowspan="1" headerText="May" width="60" />
							<p:column rowspan="1" headerText="Jun" width="60" />
							<p:column rowspan="1" headerText="Jul" width="60" />
							<p:column rowspan="1" headerText="Ago" width="60" />
							<p:column rowspan="1" headerText="Sep" width="60" />
							<p:column rowspan="1" headerText="Oct" width="60" />
							<p:column rowspan="1" headerText="Nov" width="60" />
							<p:column rowspan="1" headerText="Dic" width="60" />
						</p:row>

					</p:columnGroup>

					<p:column rowspan="3" rendered="#{kpi.reder == 1}"
						style="text-align:center">
						<p:graphicImage library="images" name="ticket.png" height="60"
							width="60" />
					</p:column>

					<p:column style="background:#0078ae; color:white">
						<h:outputText value="#{kpi.etiqueta}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE1}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE2}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE3}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE4}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE5}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE6}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE7}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE8}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE9}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE10}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE11}" />
					</p:column>

				</p:dataTable>

				<p:dataTable styleClass="tblPla" id="tblPlanS"
					emptyMessage="No se encontraron registros" scrollRows="40"
					scrollable="true" liveScroll="true" scrollHeight="100"
					value="#{vista_helpdeskBean.listaVistaS}" var="kpi"
					filteredValue="#{vista_helpdeskBean.listaVistaFiltro}"
					scrollWidth="97%">

					<p:columnGroup type="header">
						<p:row>
							<p:column rowspan="1" colspan="2"
								headerText="Resumen Infraestructura" width="150" />
							<p:column rowspan="1" headerText="Ene" width="60" />
							<p:column rowspan="1" headerText="Feb" width="60" />
							<p:column rowspan="1" headerText="Mar" width="60" />
							<p:column rowspan="1" headerText="Abr" width="60" />
							<p:column rowspan="1" headerText="May" width="60" />
							<p:column rowspan="1" headerText="Jun" width="60" />
							<p:column rowspan="1" headerText="Jul" width="60" />
							<p:column rowspan="1" headerText="Ago" width="60" />
							<p:column rowspan="1" headerText="Sep" width="60" />
							<p:column rowspan="1" headerText="Oct" width="60" />
							<p:column rowspan="1" headerText="Nov" width="60" />
							<p:column rowspan="1" headerText="Dic" width="60" />
						</p:row>

					</p:columnGroup>

					<p:column rowspan="3" rendered="#{kpi.reder == 1}"
						style="text-align:center">
						<p:graphicImage library="images" name="sap.png" height="60"
							width="70" />
					</p:column>

					<p:column style="background:#0078ae; color:white">
						<h:outputText value="#{kpi.etiqueta}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE1}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE2}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE3}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE4}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE5}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE6}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE7}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE8}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE9}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE10}" />
					</p:column>

					<p:column>
						<h:outputText value="#{kpi.itemE11}" />
					</p:column>

				</p:dataTable>
				
				<div class="ui-grid-row">
				<div class="ui-grid-col-4" style="width:620px; padding-left: 10px">
					<p:panel>
						<p:chart id="kpiF" type="line" model="#{vista_helpdeskBean.kpi}"
									style="width:550px;height:250px" />
					</p:panel>					
				</div>	
				<div class="ui-grid-col-4" style="width: 620px; padding-left: 20px">
					<p:panel>
						<p:chart id="kpiS" type="line" model="#{vista_helpdeskBean.kpiS}"
								style="width:550px;height:250px" />	
					</p:panel>			
				</div>
				</div>								

			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>
</html>
